(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.LocalStoragePro=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){function c(){this.regexes={}}c.prototype.addKit=function(h,a=null,b=null){const c=this;let d=null,i=null,j=null;if("string"==typeof h)d=h,i=a,j=b;else if("[object Object]"===Object.prototype.toString.call(h))d=h.name,i=h.items,j=h.opts;else return;if(!("string"!=typeof d||d in c)&&"[object Object]"!==!Object.prototype.toString.call(i)){const e=Object.keys(i);if(!(1>e.length)){const f=e.filter(function(b){return"function"==typeof i[b]&&"string"==typeof b&&!(b in c)});if(f&&!(1>f.length)){c[d]={name:d,items:[],addItem:function(e,a){if(!("string"!=typeof e||e in c))return"function"==typeof a?(c[e]=a.bind(c),-1===c[d].items.indexOf(e)&&c[d].items.push(e),!0):void 0},updateItem:function(e,a){"string"!=typeof e||"function"!=typeof a||(c[e]=a.bind(c),-1===c[d].items.indexOf(e)&&c[d].items.push(e))},removeItem:function(b){if(!(!b in c))return delete c[b],c[d].items.splice(c[d].items.indexOf(b),1),!0}};for(let b=0;b<f.length;b++)c[d].addItem(f[b],i[f[b]]);return"[object Object]"===Object.prototype.toString.call(j)&&"[object Object]"===Object.prototype.toString.call(j.regexes)&&Object.keys(j.regexes).map(function(d){const a=j.regexes[d];a instanceof RegExp&&(c.regexes[d]=j.regexes[d])}),!0}}}},c.prototype.updateKit=function(e,a){if(!(!e in this)){const b=Object.keys(a);for(let c=0;c<b.length;c++)this[e].updateItem(b[c],a[b[c]]);return!0}},b.exports=new c},{}],2:[function(a,b){b.exports={name:"error",items:{objectifyError:function(a){const b=JSON.stringify(a,Object.getOwnPropertyNames(a)),c=JSON.parse(b);return c.stack=c.stack.split(/[\n]/g),c},stringifyError:function(a){return JSON.stringify(this.objectifyError(a))}}}},{}],3:[function(a,b){b.exports={name:"function",items:{waitForIt:function(a,b,c=300,d=1e4){let e=setInterval(function(){!0===a.call()&&(clearInterval(e),b.call())},c);setTimeout(function(){e&&(clearInterval(e),b.call(null,!1))},d)},throttle:function(a,b,c){let d=!0,e=!0;if("function"!=typeof a)throw new TypeError("Invalid debounce function.");return"[object Object]"===Object.prototype.toString.call(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),this.debounce(a,b,{leading:d,maxWait:b,trailing:e})},debounce:function(a,b,c){var m=Math.max;function d(b){let c=n,d=o;return n=o=void 0,t=b,q=a.apply(d,c),q}function e(a){return t=a,r=setTimeout(h,b),u?d(a):q}function f(a){var c=Math.min;let d=a-s,e=a-t,f=b-d;return v?c(f,p-e):f}function g(a){let c=a-s,d=a-t;return void 0===s||c>=b||0>c||v&&d>=p}function h(){let a=Date.now();return g(a)?i(a):void(r=setTimeout(h,f(a)))}function i(a){return(r=void 0,w&&n)?d(a):(n=o=void 0,q)}function j(){void 0!==r&&clearTimeout(r),t=0,n=s=o=r=void 0}function k(){return void 0===r?q:i(Date.now())}function l(){let a=Date.now(),c=g(a);if(n=arguments,o=this,s=a,c){if(void 0===r)return e(s);if(v)return r=setTimeout(h,b),d(s)}return void 0===r&&(r=setTimeout(h,b)),q}let n,o,p,q,r,s,t=0,u=!1,v=!1,w=!0;if("function"!=typeof a)throw new TypeError("Invalid debounce function.");return b=parseFloat(b)||0,"[object Object]"===Object.prototype.toString.call(c)&&(u=!!c.leading,v="maxWait"in c,p=v?m(parseFloat(c.maxWait)||0,b):p,w="trailing"in c?!!c.trailing:w),l.cancel=j,l.flush=k,l},stringify:function(a){return this.isObject(a)||this.isArray(a)?JSON.stringify(a):this.isString(a)?a:this.isNumber(a)||this.isInteger(a)?a.toString():this.isBoolean(a)?a.toString():this.isNull(a)?"null":this.isUndefined(a)?"undefined":this.isDate(a)?a.toISOString():this.isError(a)?this.stringifyError(a):this.isNan(a)?"NaN":this.isDOMElement(a)&&a.innerText?a.innerText:this.isFunction(a)||this.isRegExp(a)?a.toString():this.isBigInt(a)||this.isSymbol(a)?a.toString():""},destringify:function(a,b=null){if(!this.isString(b))return a;else if("object"==b||"array"==b)try{return JSON.parse(a)}catch(a){return"object"==b?{}:"array"==b?[]:{}}else return"string"==b?a:"number"==b?parseFloat(a):"boolean"==b?"true"==a:"null"==b?null:"undefined"==b?void 0:"data"==b?new Date(a):"error"==b?this.objectifyError(a):"nan"==b?NaN:"regexp"==b?new RegExp(a):"bigint"==b?BigInt(a):"symbol"==b?Symbol(a):a}},dependencies:["type","error"]}},{}],4:[function(a,b){b.exports={name:"object",items:{getProp:function(a,b,c=void 0){if(!this.isObject(a))return c;if(this.isString(b))b=[b];else if(!this.isArray(b))return c;if(1>b.length)return c;let d=0;for(const e=b.length;this.isObject(a)&&d<e;)a=a[b[d]],d+=1;return this.isUndefined(a)?c:a},removeProp:function(a,b){if(this.isObject(a)){const c=Object.keys(a);return-1===c.indexOf(b)?a:c.reduce(function(c,d){return d!=b&&(c[d]=a[d]),c},{})}}},opts:{dependencies:["type"]}}},{}],5:[function(a,b){b.exports={name:"type",items:{isString:function(a){return"string"==typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return Array.isArray(a)},isPromise:function(a){return!!(a&&"function"==typeof a.then)},isError:function(a){return a instanceof Error},isDate:function(a){return a instanceof Date},isFunction:function(a){return"function"==typeof a},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"==typeof a},isNumber:function(a){return"number"==typeof a&&!0===Number.isFinite(a)},isInteger:function(a){return Number.isInteger(a)},isNan:function(a){return"number"==typeof a&&a!=+a},isRegExp:function(a){return a instanceof RegExp},isBoolean:function(a){return!0===a||!1===a},isBigInt:function(a){return"bigint"==typeof a},isSymbol:function(a){return"symbol"==typeof a},isDOMElement:function(a){return!!(a&&(a.nodeName||a.prop&&a.attr&&a.find))},getType:function(a){return this.isObject(a)?"object":this.isArray(a)?"array":this.isPromise(a)?"promise":this.isError(a)?"error":this.isDate(a)?"date":this.isNull(a)?"null":this.isUndefined(a)?"undefined":this.isFunction(a)?"function":this.isNumber(a)?"number":this.isNan(a)?"nan":this.isRegExp(a)?"regexp":this.isString(a)?"string":this.isBoolean(a)?"boolean":this.isBigInt(a)?"bigint":this.isSymbol(a)?"symbol":this.isDOMElement(a)?"domelement":"none"}}}},{}],6:[function(a,b){b.exports={name:"validator",items:{isEmpty:function(a){return this.isObject(a)?this.isEqual({},a):this.isArray(a)?0===a.length:!!this.isNull(a)||!!this.isUndefined(a)||(this.isNumber(a)?this.isEqual(0,a):!!this.isNan(a)||(this.isString(a)?this.isEqual("",a):!!this.isBoolean(a)&&this.isEqual(!1,a)))},isNotEmpty:function(a){return!0!==this.isEmpty(a)},isEqual:function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;const c=this.getType(a),d=this.getType(b);if(c!=d)return!1;switch(c){case"object":const d=Object.keys(a),e=Object.keys(b),f=d.length;if(f!==e.length)return!1;for(let c=0;c<f;c++){const f=d[c];if(-1===e.indexOf(f))return!1;if(!this.isEqual(a[f],b[f]))return!1}return!0;break;case"array":const g=a.length;if(g!==b.length)return!1;for(let c=0;c<g;c++)if(!this.isEqual(a[c],b[c]))return!1;return!0;break;case"error":const h=this.objectifyError(a),i=this.objectifyError(b);return this.isEqual(h,i);break;case"date":return a.getTime()===b.getTime();break;case"undefined":return!0;break;case"number":case"nan":case"string":case"boolean":case"domelement":return a===b;break;case"regexp":return a.toString()===b.toString();break;default:return!1;}},isUUID:function(a){return this.regexes.uuid.test(a)},isEmail:function(a){return this.regexes.email.test(a)},isURL:function(a,b={}){if("string"!=typeof a)return!1;b=Object.assign({},{allowLocal:!1,allowDataUrl:!1,schemes:["http","https"]},b);const{allowLocal:c,allowDataUrl:d,schemes:e}=b;let f="^(?:(?:"+e.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(c?g+="?":f+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",f+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+g+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",d){f="(?:"+f+")|(?:^"+("data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,"+"[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*")+"$)"}const h=new RegExp(f,"i");return!!h.test(a)}},opts:{dependencies:["type","error"],regexes:{uuid:/[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}/g,email:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}}}},{}],7:[function(a,b){function c(d){const e=d||{},a=Object.keys(e);this._events=0<a.length?a.reduce(function(b,a){return b[a]=Array.isArray(e[a])?e[a]:[e[a]],b},{}):{}}c.prototype._eventsWillBeFiredOnce={},c.prototype.on=function(f,a,b=null){if("function"!=typeof a||"string"!=typeof f)return!1;this._events.hasOwnProperty(f)||(this._events[f]=[]),this._eventsWillBeFiredOnce.hasOwnProperty(f)||(this._eventsWillBeFiredOnce[f]=[]);const c="[object Object]"===Object.prototype.toString.call(b)?b:{once:!1},d=this._events[f].push(a);return c.once&&!0===c.once&&this._eventsWillBeFiredOnce[f].push(d-1),!0},c.prototype.once=function(c,a){return this.on(c,a,{once:!0})},c.prototype.emit=function(e,a=[]){if(!this._events.hasOwnProperty(e))return!1;const b=Array.isArray(a)?a:[a];for(let c=0;c<this._events[e].length;c++)this._events[e][c].apply(this,b);if(this._eventsWillBeFiredOnce.hasOwnProperty(e))for(var c=0;c<this._eventsWillBeFiredOnce[e].length;c++)this.removeListener(e,this._eventsWillBeFiredOnce[e][c]);return!0},c.prototype.removeListener=function(c,a){this._events[c].splice(a,1)},c.prototype.removeListeners=function(b){return"string"==typeof b&&!!this._events.hasOwnProperty(b)&&(this._events[b]=[],this._eventsWillBeFiredOnce.hasOwnProperty(b)&&(this._eventsWillBeFiredOnce[b]=[]),!0)},c.prototype.flushEventEmitter=function(){this._events={},this._eventsWillBeFiredOnce={}},b.exports=c},{}],8:[function(a,b){function c(a={}){this.error=null,this.window=a.window}c.prototype.test=function(){if("undefined"==typeof this.window||null===this.window)return!1;if("localStorage"in this.window){try{this.window.localStorage.setItem("test","pass"),this.window.localStorage.removeItem("test")}catch(a){return!1}return!0}return!1},c.prototype.clearError=function(){this.error=null},c.prototype.set=function(a,b,c){const d=c.kit.stringify(b);try{this.window.localStorage.setItem(a,d);const e=c.kit.getType(b);this.window.localStorage.setItem("LOCALSTORAGEPRO_TYPE_"+a,e)}catch(a){return this.error=a,!1}return!0},c.prototype.get=function(a,b){const c=this.window.localStorage.getItem("LOCALSTORAGEPRO_TYPE_"+a);if("string"==typeof c&&0<c.length){const d=this.window.localStorage.getItem(a);return b.kit.destringify(d,c)}return this.window.localStorage.getItem(a)},c.prototype.remove=function(a){return this.window.localStorage.removeItem(a),this.window.localStorage.removeItem("LOCALSTORAGEPRO_TYPE_"+a),!0},c.prototype.clear=function(){return this.window.localStorage.clear(),!0},c.prototype.length=function(){return this.window.localStorage.length/2},c.prototype.key=function(a){return this.window.localStorage(a)},c.prototype.json=function a(b){const a={};for(let c=0;c<2*this.length();c++){const d=this.window.localStorage.key(c);21<d.length&&"LOCALSTORAGEPRO_TYPE_"==d.slice(0,21)||(a[d]=this.get(d,b))}return a},b.exports=c},{}],9:[function(a,b){function c(){this.error=null,this.data={}}c.prototype.test=function(){return!0},c.prototype.clearError=function(){this.error=null},c.prototype.set=function(a,b){return this.data[a]=b,!0},c.prototype.get=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},c.prototype.remove=function(a){if(!this.data.hasOwnProperty(a))return null;const b=Object.keys(this.data),c={};for(let d=0;d<b.length;d++){const e=b[d];e!=a&&(c[e]=this.data[e])}return this.data=c,!0},c.prototype.clear=function(){return this.data={},!0},c.prototype.length=function(){return Object.keys(this.data).length},c.prototype.key=function(a){const b=Object.keys(this.data);return a<b.length&&0<=a?b[a]:null},c.prototype.json=function(){return this.data},b.exports=c},{}],10:[function(a,b){function c(b={}){e.call(this,{}),this.kit=d,this.kit.addKit(a("@basekits/kit-type")),this.kit.addKit(a("@basekits/kit-error")),this.kit.addKit(a("@basekits/kit-validator")),this.kit.addKit(a("@basekits/kit-object")),this.kit.addKit(a("@basekits/kit-function")),this.drivers={},this.driver=null,this.readWindow(b),this.addDriver("memory",g),this.addDriver("localStorage",f)}const d=a("@basekits/core"),e=a("event-emitter-object"),f=a("./drivers/localStorage"),g=a("./drivers/memory");c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.length=0,c.prototype.readWindow=function(a){this.window=this.kit.getProp(a,"window","undefined"==typeof window?null:window)},c.prototype.addDriver=function(a,b){const c=new b({window:this.window});!0===c.test()&&(this.drivers[a]=c,this.driver=this.drivers[a])},c.prototype.setItem=function(a,b,c=null){if(!this.isKeyValid(a))return void this.emit("error",new Error("INVALID_KEY"));const d=this.getDriver(c);return d?(d.set(this.formatKey(a),b,this),this.kit.isError(d.error))?(this.emit("error",new Error("SET_ERROR"),d.error),void d.clearError()):(this.getLength(),!0):void 0},c.prototype.getItem=function(a,b=null){if(!this.isKeyValid(a))return void this.emit("error",new Error("INVALID_KEY"));const c=this.getDriver(b);if(c){const b=c.get(this.formatKey(a),this);return this.getLength(),b}},c.prototype.removeItem=function(a,b=null){if(!this.isKeyValid(a))return void this.emit("error",new Error("INVALID_KEY"));const c=this.getDriver(b);if(c)c.remove(this.formatKey(a)),this.getLength();else return;return!0},c.prototype.clear=function(a=null){const b=this.getDriver(a);return b&&(b.clear(),this.getLength()),!0},c.prototype.key=function(a=0,b=null){const c=this.getDriver(b);return c?c.getKey(a):null},c.prototype.getLength=function(a=null){const b=this.getDriver(a);return this.length=b?b.length():0,this.length},c.prototype.json=function(a=null){const b=this.getDriver(a);return b?b.json(this):0},c.prototype.isKeyValid=function(a){return this.kit.isString(a)&&!this.kit.isEmpty(a)||this.kit.isNumber(a)},c.prototype.formatKey=function(a){return this.kit.isNumber(a)?a.toString():a},c.prototype.availableDrivers=function(){return Object.keys(this.drivers)},c.prototype.getDriver=function(a=null){return this.kit.isEmpty(a)?this.driver:-1===this.availableDrivers().indexOf(a)?void this.emit("error",new Error("DRIVER_NOT_FOUND")):this.drivers[a]},b.exports=c},{"./drivers/localStorage":8,"./drivers/memory":9,"@basekits/core":1,"@basekits/kit-error":2,"@basekits/kit-function":3,"@basekits/kit-object":4,"@basekits/kit-type":5,"@basekits/kit-validator":6,"event-emitter-object":7}]},{},[10])(10)});