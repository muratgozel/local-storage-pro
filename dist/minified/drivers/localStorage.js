function LocalStorageDriver(a={}){this.error=null,this.window=a.window}LocalStorageDriver.prototype.test=function(){if("undefined"==typeof this.window||null===this.window)return!1;if("localStorage"in this.window){try{this.window.localStorage.setItem("test","pass"),this.window.localStorage.removeItem("test")}catch(a){return!1}return!0}return!1},LocalStorageDriver.prototype.clearError=function(){this.error=null},LocalStorageDriver.prototype.set=function(a,b,c){const d=c.kit.stringify(b);try{this.window.localStorage.setItem(a,d);const e=c.kit.getType(b);this.window.localStorage.setItem("LOCALSTORAGEPRO_TYPE_"+a,e)}catch(a){return this.error=a,!1}return!0},LocalStorageDriver.prototype.get=function(a,b){const c=this.window.localStorage.getItem("LOCALSTORAGEPRO_TYPE_"+a);if("string"==typeof c&&0<c.length){const d=this.window.localStorage.getItem(a);return b.kit.destringify(d,c)}return this.window.localStorage.getItem(a)},LocalStorageDriver.prototype.remove=function(a){return this.window.localStorage.removeItem(a),this.window.localStorage.removeItem("LOCALSTORAGEPRO_TYPE_"+a),!0},LocalStorageDriver.prototype.clear=function(){return this.window.localStorage.clear(),!0},LocalStorageDriver.prototype.length=function(){return this.window.localStorage.length/2},LocalStorageDriver.prototype.key=function(a){return this.window.localStorage(a)},LocalStorageDriver.prototype.json=function a(b){const a={};for(let c=0;c<2*this.length();c++){const d=this.window.localStorage.key(c);21<d.length&&"LOCALSTORAGEPRO_TYPE_"==d.slice(0,21)||(a[d]=this.get(d,b))}return a},module.exports=LocalStorageDriver;