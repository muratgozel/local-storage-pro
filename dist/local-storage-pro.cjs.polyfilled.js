"use strict";var t=require("basekits");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=r(require("event-emitter-object")),n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,r){return t(r={exports:{}},r.exports),r.exports}var i=function(t){return t&&t.Math==Math&&t},u=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n&&n)||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},c=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,s={f:l&&!f.call({1:2},1)?function(t){var r=l(this,t);return!!r&&r.enumerable}:f},p=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}},h={}.toString,y=function(t){return h.call(t).slice(8,-1)},g="".split,d=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==y(t)?g.call(t,""):Object(t)}:Object,v=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},w=function(t){return d(v(t))},m=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t,r){if(!m(t))return t;var e,n;if(r&&"function"==typeof(e=t.toString)&&!m(n=e.call(t)))return n;if("function"==typeof(e=t.valueOf)&&!m(n=e.call(t)))return n;if(!r&&"function"==typeof(e=t.toString)&&!m(n=e.call(t)))return n;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,O=function(t,r){return b.call(t,r)},E=u.document,j=m(E)&&m(E.createElement),A=!c&&!a((function(){return 7!=Object.defineProperty((t="div",j?E.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),k=Object.getOwnPropertyDescriptor,I={f:c?k:function(t,r){if(t=w(t),r=S(r,!0),A)try{return k(t,r)}catch(t){}if(O(t,r))return p(!s.f.call(t,r),t[r])}},P=function(t){if(!m(t))throw TypeError(String(t)+" is not an object");return t},T=Object.defineProperty,_={f:c?T:function(t,r,e){if(P(t),r=S(r,!0),P(e),A)try{return T(t,r,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported");return"value"in e&&(t[r]=e.value),t}},D=c?function(t,r,e){return _.f(t,r,p(1,e))}:function(t,r,e){return t[r]=e,t},L=function(t,r){try{D(u,t,r)}catch(e){u[t]=r}return r},R=u["__core-js_shared__"]||L("__core-js_shared__",{}),x=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(t){return x.call(t)});var C,N,K,M,V=R.inspectSource,Y=u.WeakMap,F="function"==typeof Y&&/native code/.test(V(Y)),G=o((function(t){(t.exports=function(t,r){return R[t]||(R[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),z=0,W=Math.random(),q=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++z+W).toString(36)},U=G("keys"),B={},H=u.WeakMap;if(F){var J=new H,Q=J.get,X=J.has,Z=J.set;C=function(t,r){return Z.call(J,t,r),r},N=function(t){return Q.call(J,t)||{}},K=function(t){return X.call(J,t)}}else{var $=U[M="state"]||(U[M]=q(M));B[$]=!0,C=function(t,r){return D(t,$,r),r},N=function(t){return O(t,$)?t[$]:{}},K=function(t){return O(t,$)}}var tt,rt,et={set:C,get:N,has:K,enforce:function(t){return K(t)?N(t):C(t,{})},getterFor:function(t){return function(r){var e;if(!m(r)||(e=N(r)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return e}}},nt=o((function(t){var r=et.get,e=et.enforce,n=String(String).split("String");(t.exports=function(t,r,o,i){var a=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,f=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof r||O(o,"name")||D(o,"name",r),e(o).source=n.join("string"==typeof r?r:"")),t!==u?(a?!f&&t[r]&&(c=!0):delete t[r],c?t[r]=o:D(t,r,o)):c?t[r]=o:L(r,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&r(this).source||V(this)}))})),ot=u,it=function(t){return"function"==typeof t?t:void 0},ut=function(t,r){return arguments.length<2?it(ot[t])||it(u[t]):ot[t]&&ot[t][r]||u[t]&&u[t][r]},at=Math.ceil,ct=Math.floor,ft=function(t){return isNaN(t=+t)?0:(t>0?ct:at)(t)},lt=Math.min,st=function(t){return t>0?lt(ft(t),9007199254740991):0},pt=Math.max,ht=Math.min,yt=function(t,r){var e=ft(t);return e<0?pt(e+r,0):ht(e,r)},gt=function(t){return function(r,e,n){var o,i=w(r),u=st(i.length),a=yt(n,u);if(t&&e!=e){for(;u>a;)if((o=i[a++])!=o)return!0}else for(;u>a;a++)if((t||a in i)&&i[a]===e)return t||a||0;return!t&&-1}},dt={includes:gt(!0),indexOf:gt(!1)},vt=dt.indexOf,wt=function(t,r){var e,n=w(t),o=0,i=[];for(e in n)!O(B,e)&&O(n,e)&&i.push(e);for(;r.length>o;)O(n,e=r[o++])&&(~vt(i,e)||i.push(e));return i},mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],St=mt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return wt(t,St)}},Ot={f:Object.getOwnPropertySymbols},Et=ut("Reflect","ownKeys")||function(t){var r=bt.f(P(t)),e=Ot.f;return e?r.concat(e(t)):r},jt=function(t,r){for(var e=Et(r),n=_.f,o=I.f,i=0;i<e.length;i++){var u=e[i];O(t,u)||n(t,u,o(r,u))}},At=/#|\.prototype\./,kt=function(t,r){var e=Pt[It(t)];return e==_t||e!=Tt&&("function"==typeof r?a(r):!!r)},It=kt.normalize=function(t){return String(t).replace(At,".").toLowerCase()},Pt=kt.data={},Tt=kt.NATIVE="N",_t=kt.POLYFILL="P",Dt=kt,Lt=I.f,Rt=function(t,r){var e,n,o,i,a,c=t.target,f=t.global,l=t.stat;if(e=f?u:l?u[c]||L(c,{}):(u[c]||{}).prototype)for(n in r){if(i=r[n],o=t.noTargetGet?(a=Lt(e,n))&&a.value:e[n],!Dt(f?n:c+(l?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;jt(i,o)}(t.sham||o&&o.sham)&&D(i,"sham",!0),nt(e,n,i,t)}},xt=Object.defineProperty,Ct={},Nt=function(t){throw t},Kt=function(t,r){if(O(Ct,t))return Ct[t];r||(r={});var e=[][t],n=!!O(r,"ACCESSORS")&&r.ACCESSORS,o=O(r,0)?r[0]:Nt,i=O(r,1)?r[1]:void 0;return Ct[t]=!!e&&!a((function(){if(n&&!c)return!0;var t={length:-1};n?xt(t,1,{enumerable:!0,get:Nt}):t[1]=1,e.call(t,o,i)}))},Mt=dt.indexOf,Vt=[].indexOf,Yt=!!Vt&&1/[1].indexOf(1,-0)<0,Ft=!!(rt=[]["indexOf"])&&a((function(){rt.call(null,tt||function(){throw 1},1)})),Gt=Kt("indexOf",{ACCESSORS:!0,1:0});Rt({target:"Array",proto:!0,forced:Yt||!Ft||!Gt},{indexOf:function(t){return Yt?Vt.apply(this,arguments)||0:Mt(this,t,arguments.length>1?arguments[1]:void 0)}});var zt=Object.keys||function(t){return wt(t,mt)};Rt({target:"Object",stat:!0,forced:a((function(){zt(1)}))},{keys:function(t){return zt(function(t){return Object(v(t))}(t))}});var Wt=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),qt=Wt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ut=G("wks"),Bt=u.Symbol,Ht=qt?Bt:Bt&&Bt.withoutSetter||q,Jt=function(t){return O(Ut,t)||(Wt&&O(Bt,t)?Ut[t]=Bt[t]:Ut[t]=Ht("Symbol."+t)),Ut[t]},Qt={};Qt[Jt("toStringTag")]="z";var Xt="[object z]"===String(Qt),Zt=Jt("toStringTag"),$t="Arguments"==y(function(){return arguments}()),tr=Xt?y:function(t){var r,e,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,r){try{return t[r]}catch(t){}}(r=Object(t),Zt))?e:$t?y(r):"Object"==(n=y(r))&&"function"==typeof r.callee?"Arguments":n},rr=Xt?{}.toString:function(){return"[object "+tr(this)+"]"};Xt||nt(Object.prototype,"toString",rr,{unsafe:!0});var er=function(){var t=P(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.dotAll&&(r+="s"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},nr=RegExp.prototype,or=nr.toString,ir=a((function(){return"/a/b"!=or.call({source:"a",flags:"b"})})),ur="toString"!=or.name;(ir||ur)&&nt(RegExp.prototype,"toString",(function(){var t=P(this),r=String(t.source),e=t.flags;return"/"+r+"/"+String(void 0===e&&t instanceof RegExp&&!("flags"in nr)?er.call(t):e)}),{unsafe:!0});var ar,cr,fr=Array.isArray||function(t){return"Array"==y(t)},lr=function(t,r,e){var n=S(r);n in t?_.f(t,n,p(0,e)):t[n]=e},sr=ut("navigator","userAgent")||"",pr=u.process,hr=pr&&pr.versions,yr=hr&&hr.v8;yr?cr=(ar=yr.split("."))[0]+ar[1]:sr&&(!(ar=sr.match(/Edge\/(\d+)/))||ar[1]>=74)&&(ar=sr.match(/Chrome\/(\d+)/))&&(cr=ar[1]);var gr=cr&&+cr,dr=Jt("species"),vr=function(t){return gr>=51||!a((function(){var r=[];return(r.constructor={})[dr]=function(){return{foo:1}},1!==r[t](Boolean).foo}))}("slice"),wr=Kt("slice",{ACCESSORS:!0,0:0,1:2}),mr=Jt("species"),Sr=[].slice,br=Math.max;function Or(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.error=null,this.window=t.window}function Er(){this.error=null,this.data={}}function jr(){e.default.call(this,{}),this.window=void 0,this.setWindow("undefined"==typeof window?void 0:window),this.drivers={},this.driver=null,this.addDriver("memory",Er),this.addDriver("localStorage",Or)}Rt({target:"Array",proto:!0,forced:!vr||!wr},{slice:function(t,r){var e,n,o,i=w(this),u=st(i.length),a=yt(t,u),c=yt(void 0===r?u:r,u);if(fr(i)&&("function"!=typeof(e=i.constructor)||e!==Array&&!fr(e.prototype)?m(e)&&null===(e=e[mr])&&(e=void 0):e=void 0,e===Array||void 0===e))return Sr.call(i,a,c);for(n=new(void 0===e?Array:e)(br(c-a,0)),o=0;a<c;a++,o++)a in i&&lr(n,o,i[a]);return n.length=o,n}}),Or.prototype.test=function(){if(void 0===this.window)return!1;if("localStorage"in this.window){try{this.window.localStorage.setItem("test","pass"),this.window.localStorage.removeItem("test")}catch(t){return!1}return!0}return!1},Or.prototype.clearError=function(){this.error=null},Or.prototype.set=function(r,e,n){var o=t.functionkit.stringify(e);try{this.window.localStorage.setItem(r,o);var i=t.typekit.getType(e);this.window.localStorage.setItem("LOCALSTORAGEPRO_TYPE_"+r,i)}catch(t){return this.error=t,!1}return!0},Or.prototype.get=function(r,e){var n=this.window.localStorage.getItem("LOCALSTORAGEPRO_TYPE_"+r);if("string"==typeof n&&n.length>0){var o=this.window.localStorage.getItem(r);return t.functionkit.destringify(o,n)}return this.window.localStorage.getItem(r)},Or.prototype.remove=function(t){return this.window.localStorage.removeItem(t),this.window.localStorage.removeItem("LOCALSTORAGEPRO_TYPE_"+t),!0},Or.prototype.clear=function(){return this.window.localStorage.clear(),!0},Or.prototype.length=function(){return this.window.localStorage.length/2},Or.prototype.key=function(t){return this.window.localStorage(t)},Or.prototype.json=function(t){for(var r={},e=0;e<2*this.length();e++){var n=this.window.localStorage.key(e);n.length>21&&"LOCALSTORAGEPRO_TYPE_"==n.slice(0,21)||(r[n]=this.get(n,t))}return r},Er.prototype.test=function(){return!0},Er.prototype.clearError=function(){this.error=null},Er.prototype.set=function(t,r){return this.data[t]=r,!0},Er.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},Er.prototype.remove=function(t){if(!this.data.hasOwnProperty(t))return null;for(var r=Object.keys(this.data),e={},n=0;n<r.length;n++){var o=r[n];o!=t&&(e[o]=this.data[o])}return this.data=e,!0},Er.prototype.clear=function(){return this.data={},!0},Er.prototype.length=function(){return Object.keys(this.data).length},Er.prototype.key=function(t){var r=Object.keys(this.data);return t<r.length&&t>=0?r[t]:null},Er.prototype.json=function(){return this.data},jr.prototype=Object.create(e.default.prototype),jr.prototype.constructor=jr,jr.prototype.length=0,jr.prototype.setWindow=function(t){this.window=t},jr.prototype.addDriver=function(t,r){var e=new r({window:this.window});!0===e.test()&&(this.drivers[t]=e,this.driver=this.drivers[t])},jr.prototype.setItem=function(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.isKeyValid(r)){var o=this.getDriver(n);return o?(o.set(this.formatKey(r),e,this),t.typekit.isError(o.error)?(this.emit("error",new Error("SET_ERROR"),o.error),void o.clearError()):(this.getLength(),!0)):void 0}this.emit("error",new Error("INVALID_KEY"))},jr.prototype.getItem=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isKeyValid(t)){var e=this.getDriver(r);if(e){var n=e.get(this.formatKey(t),this);return this.getLength(),n}}else this.emit("error",new Error("INVALID_KEY"))},jr.prototype.removeItem=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isKeyValid(t)){var e=this.getDriver(r);if(e)return e.remove(this.formatKey(t)),this.getLength(),!0}else this.emit("error",new Error("INVALID_KEY"))},jr.prototype.clear=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getDriver(t);return r&&(r.clear(),this.getLength()),!0},jr.prototype.key=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=this.getDriver(r);return e?e.getKey(t):null},jr.prototype.getLength=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getDriver(t);return this.length=r?r.length():0,this.length},jr.prototype.json=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.getDriver(t);return r?r.json(this):0},jr.prototype.isKeyValid=function(r){return t.typekit.isString(r)&&t.validationkit.isNotEmpty(r)||t.typekit.isNumber(r)},jr.prototype.formatKey=function(r){return t.typekit.isNumber(r)?r.toString():r},jr.prototype.availableDrivers=function(){return Object.keys(this.drivers)},jr.prototype.getDriver=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t.validationkit.isNotEmpty(r)?-1===this.availableDrivers().indexOf(r)?void this.emit("error",new Error("DRIVER_NOT_FOUND")):this.drivers[r]:this.driver};var Ar=new jr;module.exports=Ar;
